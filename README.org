#+TITLE: PEP 420 Implicit Namespace Test
#+AUTHOR: Trevor Wilson
#+DESCRIPTION: Exploring issues with implicit namespace
#+STARTUP: showall

* What are the issues?
PEP-420 [[https://www.python.org/dev/peps/pep-0420/#differences-between-namespace-packages-and-regular-packages][Differences between namespace packages and regular packages]] says that an implicit namespace package should not have a =__file__= attribute. I wrote a test that checks for the presense of the =__file__= attribute and the test fails.

* How to run the tests?
The repository includes an implicitly namespace package named =implicit_namespace_foo=. Clone the repository.
#+begin_src sh
  cd ~/dev
  git clone https://github.com/BloggerBust/test_pep_420.git
  cd test_pep_420
#+end_src

Then run the tests
#+begin_src sh :results output scalar replace :shebang "#!/bin/bash" :dir ~/dev/test_pep_420 :wrap example
  rm -rf venv/
  python -m venv venv
  source venv/bin/activate
  pip install -q --upgrade pip
  python -m unittest discover
#+end_src

#+RESULTS:
#+begin_example
..F
======================================================================
FAIL: test_namespace_has_no_file_attribute (test.bar.test_pep420_implicit_namespace_package.TestPep420ImplicitNamespacePackage)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/dustfinger/dev/test_pep_420/test/bar/test_pep420_implicit_namespace_package.py", line 14, in test_namespace_has_no_file_attribute
    self.assertFalse(hasattr(implicit_namespace_foo, '__file__'))
AssertionError: True is not false

----------------------------------------------------------------------
Ran 3 tests in 0.000s

FAILED (failures=1)
#+end_example
